// Generated by CoffeeScript 2.2.1
(function() {
  var makeAltar, makePseudonyms, makeRelationships, makeSignificance;

  $(document).ready(function() {
    var spiritId;
    spiritId = $('#spirit-name').attr('data-id');
    $.ajax({
      'async': true,
      'crossDomain': true,
      'headers': {
        'spirit': spiritId
      },
      type: 'GET',
      url: '/getSpirit',
      success: (response) => {
        return makeAltar(response);
      }
    });
    $.ajax({
      'async': true,
      'crossDomain': true,
      'headers': {
        'spirit': spiritId
      },
      type: 'GET',
      url: '/getPseudonyms',
      success: (response) => {
        return makePseudonyms(response);
      }
    });
    $.ajax({
      'async': true,
      'crossDomain': true,
      'headers': {
        'spirit': spiritId
      },
      type: 'GET',
      url: '/getRelationships',
      success: (response) => {
        return makeRelationships(response);
      }
    });
    $.ajax({
      'async': true,
      'crossDomain': true,
      'headers': {
        'spirit': spiritId
      },
      type: 'GET',
      url: '/getSignificance',
      success: (response) => {
        return makeSignificance(response);
      }
    });
  });

  makeAltar = function(spirit) {
    var feed, spirits;
    console.log('got spirits');
    spirits = spirit[0];
    feed = document.getElementById('main');
    if (spirits.length) {
      spirit = spirits[0];
      $('#spirit-photo').attr('src', spirit['sDefaultPhoto']);
      document.getElementById('spirit-name').innerHTML = spirit['sName'];
      document.getElementById('spirit-type').innerHTML = spirit['sType'];
      return feed.innerHTML += '<p>' + spirit['sInfo'] + '</p>';
    } else {
      return $(feed).html("<h1>No data for this spirit!</h1><p>There is no spirit data to display at this time</p>");
    }
  };

  makePseudonyms = function(data) {
    var i, len, name, pseudonymHTML, pseudonyms;
    console.log('got spirits');
    pseudonyms = data[0];
    pseudonymHTML = '<strong>Pseudonyms:</strong> <br>';
    if (pseudonyms.length) {
      for (i = 0, len = pseudonyms.length; i < len; i++) {
        name = pseudonyms[i];
        pseudonymHTML += name['psuedonym'] + ', ';
      }
      pseudonymHTML = pseudonymHTML.substring(0, pseudonymHTML.length - 2);
    }
    return document.getElementById('pseudonyms').innerHTML = pseudonymHTML;
  };

  makeRelationships = function(data) {
    var i, len, name, relationships, relationshipsHTML;
    console.log('got relationships');
    relationships = data[0];
    relationshipsHTML = '<strong>Relationships:</strong> <br>';
    if (relationships.length) {
      for (i = 0, len = relationships.length; i < len; i++) {
        name = relationships[i];
        relationshipsHTML += '' + name['relationshipDesc'] + ': ' + '<a href="/spirit/' + name['s2Id'] + '">' + name['sName'] + '</a> <br>';
      }
      relationshipsHTML = relationshipsHTML.substring(0, relationshipsHTML.length - 5);
    }
    return document.getElementById('relationships').innerHTML = relationshipsHTML;
  };

  makeSignificance = function(data) {
    var i, len, rep, reps, repsHTML;
    console.log('got significance');
    reps = data[0];
    repsHTML = '<strong>Represents:</strong> <br>';
    if (reps.length) {
      for (i = 0, len = reps.length; i < len; i++) {
        rep = reps[i];
        repsHTML += rep['significance'] + ', ';
      }
      repsHTML = repsHTML.substring(0, repsHTML.length - 2);
    }
    return document.getElementById('significance').innerHTML = repsHTML;
  };

}).call(this);

//# sourceMappingURL=spirit.js.map
